# domi.txt
ğŸ’¾ Î ÏÎ¿Ï„ÎµÎ¹Î½ÏŒÎ¼ÎµÎ½Î· Î´Î¿Î¼Î® Ï†Î±ÎºÎ­Î»Ï‰Î½
ckeapp/
â”œâ”€â”€ run.py
â”œâ”€â”€ .env
â”œâ”€â”€ .flaskenv
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ instance/
â”‚   â””â”€â”€ uploads/
â””â”€â”€ app/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ config.py
    â”œâ”€â”€ extensions.py
    â”œâ”€â”€ models/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ post.py
    â”‚   â””â”€â”€ user.py
    â”œâ”€â”€ utils/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â””â”€â”€ permissions.py
    â”œâ”€â”€ main/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ routes.py
    â”‚   â””â”€â”€ templates/
    â”‚       â””â”€â”€ main/
    â”‚           â””â”€â”€ index.html
    â”œâ”€â”€ auth/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ routes.py
    â”‚   â””â”€â”€ templates/
    â”‚       â””â”€â”€ auth/
    â”‚           â””â”€â”€ login.html
    â”œâ”€â”€ admin/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ routes.py
    â”‚   â””â”€â”€ templates/
    â”‚       â””â”€â”€ admin/
    â”‚           â””â”€â”€ dashboard.html

1ï¸âƒ£ run.py
from app import create_app

app = create_app()

if __name__ == "__main__":
    app.run(debug=True)

2ï¸âƒ£ .env
FLASK_APP=run.py
FLASK_ENV=development
FLASK_DEBUG=1
SECRET_KEY=supersecretkey
DATABASE_URL=mysql+pymysql://user:password@localhost/flask_app?charset=utf8mb4
MAX_CONTENT_LENGTH=16MB
UPLOAD_FOLDER=instance/uploads

3ï¸âƒ£ app/config.py
import os
from dotenv import load_dotenv

load_dotenv()

class Config:
    SECRET_KEY = os.getenv("SECRET_KEY", "defaultsecret")
    SQLALCHEMY_DATABASE_URI = os.getenv("DATABASE_URL")
    SQLALCHEMY_TRACK_MODIFICATIONS = False
    CKEDITOR_PKG_TYPE = 'standard'
    UPLOAD_FOLDER = os.getenv("UPLOAD_FOLDER", "instance/uploads")
    MAX_CONTENT_LENGTH = 16 * 1024 * 1024  # 16MB

4ï¸âƒ£ app/extensions.py
from flask_sqlalchemy import SQLAlchemy
from flask_migrate import Migrate
from flask_login import LoginManager
from flask_ckeditor import CKEditor
from flask_wtf import CSRFProtect

db = SQLAlchemy()
migrate = Migrate()
login_manager = LoginManager()
ckeditor = CKEditor()
csrf = CSRFProtect()

5ï¸âƒ£ app/init.py
from flask import Flask
from .config import Config
from .extensions import db, migrate, login_manager, ckeditor, csrf

def create_app():
    app = Flask(__name__)
    app.config.from_object(Config)

    # Extensions
    db.init_app(app)
    migrate.init_app(app, db)
    login_manager.init_app(app)
    ckeditor.init_app(app)
    csrf.init_app(app)

    # Blueprints
    from .main import main_bp
    from .auth import auth_bp
    from .admin import admin_bp

    app.register_blueprint(main_bp)
    app.register_blueprint(auth_bp, url_prefix='/auth')
    app.register_blueprint(admin_bp, url_prefix='/admin')

    return app

6ï¸âƒ£ app/models/init.py
from .user import User
from .post import Post

app/models/user.py
from app.extensions import db
from flask_login import UserMixin

class User(UserMixin, db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(80), unique=True, nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)
    password_hash = db.Column(db.String(120), nullable=False)
    role = db.Column(db.String(50), default='user')
    posts = db.relationship('Post', back_populates='author')

    def is_admin(self):
        return self.role == 'admin'

app/models/post.py
from datetime import datetime
from app.extensions import db
from sqlalchemy.orm import relationship

class Post(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(150), nullable=False)
    content = db.Column(db.Text, nullable=False)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    author_id = db.Column(db.Integer, db.ForeignKey('user.id'))
    author = relationship('User', back_populates='posts')

7ï¸âƒ£ app/utils/permissions.py
from functools import wraps
from flask import abort
from flask_login import current_user

def admin_required(f):
    @wraps(f)
    def decorated(*args, **kwargs):
        if not (current_user.is_authenticated and current_user.is_admin()):
            abort(403)
        return f(*args, **kwargs)
    return decorated

8ï¸âƒ£ app/main/init.py
from flask import Blueprint

main_bp = Blueprint('main', __name__, template_folder='templates')

from . import routes

app/main/routes.py
from flask import render_template
from . import main_bp

@main_bp.route('/')
def index():
    return render_template('main/index.html')

app/main/templates/main/index.html
<h1>Welcome to Flask CKEditor App!</h1>

9ï¸âƒ£ app/auth/init.py
from flask import Blueprint

auth_bp = Blueprint('auth', __name__, template_folder='templates')

from . import routes

app/auth/routes.py
from flask import render_template
from . import auth_bp

@auth_bp.route('/login')
def login():
    return render_template('auth/login.html')

app/auth/templates/auth/login.html
<h1>Login Page</h1>

ğŸ”Ÿ app/admin/init.py
from flask import Blueprint

admin_bp = Blueprint('admin', __name__, template_folder='templates')

from . import routes

app/admin/routes.py
from flask import render_template
from . import admin_bp

@admin_bp.route('/')
def dashboard():
    return render_template('admin/dashboard.html')

app/admin/templates/admin/dashboard.html
<h1>Admin Dashboard</h1>

1ï¸âƒ£1ï¸âƒ£ requirements.txt
Flask==3.1.2
Flask-SQLAlchemy==3.1.1
Flask-Migrate==4.1.0
Flask-Login==0.6.3
Flask-WTF==1.2.2
Flask-CKEditor==1.0.0
PyMySQL==1.1.2
python-dotenv==1.2.1


âœ… Î‘Ï…Ï„Î® Î· Î´Î¿Î¼Î®:

Î›ÏÎ½ÎµÎ¹ TemplateNotFound (ÎºÎ¬Î¸Îµ Blueprint Î­Ï‡ÎµÎ¹ Ï„Î¿ Î´Î¹ÎºÏŒ Ï„Î¿Ï… template_folder).

Î›ÏÎ½ÎµÎ¹ ModuleNotFound / circular imports (ÏŒÎ»Î± Ï„Î± imports ÎµÎ¯Î½Î±Î¹ ÏƒÏ‡ÎµÏ„Î¹ÎºÎ¬ ÏƒÏ‰ÏƒÏ„Î¬).

Î ÏÎ¿ÎµÏ„Î¿Î¹Î¼Î¬Î¶ÎµÎ¹ Î³Î¹Î± CKEditor uploads, login/permissions, MySQL + SQLAlchemy.

Î‘Î½ Î¸ÎµÏ‚, Î¼Ï€Î¿ÏÏ Î½Î± ÏƒÎ¿Ï… Ï†Ï„Î¹Î¬Î¾Ï‰ Î­Ï„Î¿Î¹Î¼Î¿ .env + migration scripts ÏÏƒÏ„Îµ Î½Î± ÎºÎ¬Î½ÎµÎ¹Ï‚ Î±Î¼Î­ÏƒÏ‰Ï‚:

flask db init
flask db migrate -m "initial"
flask db upgrade


ÎºÎ±Î¹ Î½Î± Î­Ï‡ÎµÎ¹Ï‚ Ï„Î· Î²Î¬ÏƒÎ· Î­Ï„Î¿Î¹Î¼Î· Î³Î¹Î± posts & users.



ckeapp/
â”œâ”€â”€ run.py
â”œâ”€â”€ .env
â”œâ”€â”€ .flaskenv
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ instance/
â”‚   â””â”€â”€ uploads/
â””â”€â”€ app/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ config.py
    â”œâ”€â”€ extensions.py
    â”œâ”€â”€ models/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ user.py
    â”‚   â””â”€â”€ post.py
    â”œâ”€â”€ utils/
    â”‚   â””â”€â”€ permissions.py
    â”œâ”€â”€ templates/
    â”‚   â”œâ”€â”€ base.html          ğŸ‘ˆ ÎšÎŸÎ™ÎÎŸ
    â”‚   â”œâ”€â”€ auth/
    â”‚   â”‚   â””â”€â”€ login.html
    â”‚   â”œâ”€â”€ main/
    â”‚   â”‚   â””â”€â”€ index.html
    â”‚   â””â”€â”€ admin/
    â”‚       â””â”€â”€ dashboard.html
    â”œâ”€â”€ static/
    â”‚   â””â”€â”€ css/
    â”‚       â””â”€â”€ styles.css
    â”œâ”€â”€ main/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â””â”€â”€ routes.py
    â”œâ”€â”€ auth/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â””â”€â”€ routes.py
    â””â”€â”€ admin/
        â”œâ”€â”€ __init__.py
        â””â”€â”€ routes.py


